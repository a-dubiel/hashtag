function updateViewportDimensions(){var e=window,t=document,a=t.documentElement,o=t.getElementsByTagName("body")[0],n=e.innerWidth||a.clientWidth||o.clientWidth,i=e.innerHeight||a.clientHeight||o.clientHeight;return{width:n,height:i}}function youtube_parser(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,a=e.match(t);return a&&11==a[7].length?a[7]:void 0}function facebook_parser(e){var t=/^[^#?]*\?(?:[^#]*&)?v=(\d+)(?:[#&]|$)/,a=e.match(t);return a?a[1]:void 0}var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var e={};return function(t,a,o){o||(o="Don't call this twice without a uniqueId"),e[o]&&clearTimeout(e[o]),e[o]=setTimeout(t,a)}}(),timeToWaitForLast=100;jQuery(document).ready(function($){$(".faq-item").click(function(){return el=$(this),el.find(".fa").toggleClass("fa-minus"),el.parent().find(".faq-content").toggleClass("hide"),!1}),".timeago".length>0&&$(".timeago").timeago(),".alert-top".length>0&&setTimeout(function(){$(".alert-top").addClass("fadeOutUpBig")},5e3),$(".js-close-alert").click(function(e){$(".alert-top").addClass("fadeOutUpBig"),e.preventDefault()}),$(".js-close-cookies, .cookie-info").click(function(e){$(".cookie-info").addClass("fadeOutDown"),$.get(base+"/ajax/cookies",function(){}),e.preventDefault()}),"#_=_"==window.location.hash&&(window.location.hash="",history.pushState("",document.title,window.location.pathname)),$(".input-default").focus(function(){$el=$(this),$el.hasClass("has-error")&&($el.removeClass("has-error"),$el.next("p.help-block").hide())}),$(document).on("click",".js-signup-popup",function(e){is_logged_in||$.ajax({url:base+"/popup/signup",type:"POST",data:{_token:$('meta[name="_token"]').attr("content"),path:window.location.pathname},success:function(e,t,a){$.magnificPopup.close(),$.magnificPopup.open({items:{src:e,type:"inline"}})},error:function(e,t,a){}}),e.preventDefault()}),$(document).on("click",".js-login-popup",function(e){is_logged_in||$.ajax({url:base+"/popup/login",type:"POST",data:{_token:$('meta[name="_token"]').attr("content"),path:window.location.pathname},success:function(e,t,a){$.magnificPopup.close(),$.magnificPopup.open({items:{src:e,type:"inline"}})},error:function(e,t,a){console.log(e)}}),e.preventDefault()}),$(document).on("submit",".home-search form, .board-top-search form",function(){var e=$(this).find('input[name="query"]').val();ga("send","event","form","search","board",e)}),$(document).on("submit","#change-desc",function(){return $wrap=$(".board-description"),$data=$("#input-desc").val(),$.ajax({url:base+"/board/update/description",type:"POST",data:{_token:$('meta[name="_token"]').attr("content"),description:$("#input-desc").val(),board_id:board_id},success:function(e,t,a){e.length>0?($("#change-desc").remove(),$wrap.append('<div class="board-description-wrapper"><p class="board-description-data">'+e+'</p><a href="#" class="btn-default btn-link-primary btn-text js-update-description">Edytuj opis</a></div>')):($wrap.html(""),$wrap.append('<div class="board-description-wrapper"><p class="board-description-data">Co oznacza ten hasztag?</p><a href="#" class="btn-default btn-link-primary btn-text js-update-description">Edytuj opis</a></div>'))},error:function(e,t,a){}}),!1}),$(document).on("click",".share-links a",function(e){share_url=$(this).data("url"),vendor=$(this).data("vendor"),width=500,height=400;var t,a,o;"fb"==vendor?o="https://www.facebook.com/sharer/sharer.php?u="+encodeURI(share_url)+'"':"tw"==vendor?o="http://www.twitter.com/share?url="+encodeURI(share_url):"gl"==vendor?o="https://plus.google.com/share?url="+encodeURI(share_url):"mail"==vendor&&(o="mailto:?body="+share_url+"&subject=Zobacz to na hasztag.info"),t=window.screen.width/2-(width/2+10),a=window.screen.height/2-(height/2+50),window.open(o,"share_window","status=no,height="+height+",width="+width+",resizable=yes,left="+t+",top="+a+",screenX="+t+",screenY="+a+",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no"),e.preventDefault()}),$(".js-share").click(function(e){$.ajax({url:base+"/popup/share",type:"POST",data:{_token:$('meta[name="_token"]').attr("content"),path:window.location.pathname},success:function(e,t,a){$.magnificPopup.close(),$.magnificPopup.open({items:{src:e,type:"inline"}})},error:function(e,t,a){console.log(e)}}),e.preventDefault()}),$(document).on("click",".js-update-description",function(e){is_logged_in?($desc=$(".board-description-data"),$wrap=$(".board-description-wrapper"),$wrap.wrap('<form action="" id="change-desc" method="post">'),$wrap.append($("<input />",{value:$desc.text(),"class":"input-blank input-default",type:"text",id:"input-desc"})),$wrap.append($("<input />",{value:"OK","class":"hide",type:"submit"})),$("#change-desc").find(".input-blank").val("").focus(),$(this).hide(),$desc.hide()):$.ajax({url:base+"/popup/signup",type:"POST",data:{_token:$('meta[name="_token"]').attr("content"),path:window.location.pathname},success:function(e,t,a){$.magnificPopup.close(),$.magnificPopup.open({items:{src:e,type:"inline"}})},error:function(e,t,a){}}),e.preventDefault()}),$.extend(!0,$.magnificPopup.defaults,{tClose:"Zamknij (Esc)",tLoading:"Ładuje...",gallery:{tPrev:"Poprzedni (Lewa strzałka)",tNext:"Następny (Prawa strzałka)",tCounter:"%curr% z %total%"},image:{tError:'Nie mogę załadować <a href="%url%">obrazka</a>.'},ajax:{tError:'Nie mogę otworzyć <a href="%url%">zawartości</a>.'}}),$(document).on("click",".video-link-popup",function(e){$el=$(this);var t='<div class="video-popup"><video type="video/mp4" autoplay="autoplay" controls="controls" loop="true" poster="'+$el.attr("href")+'" src="'+$el.data("video")+'" alt=""><img src="'+$el.attr("href")+'" alt=""></video></div>';$.magnificPopup.open({items:{src:t,type:"inline"}}),e.preventDefault()}),$(document).on("click",".image-link",function(e){$el=$(this),console.log($el.data("username")),$.magnificPopup.open({image:{titleSrc:$el.data("username"),verticalFit:!0},items:{src:$el.attr("href")},type:"image"},0),e.preventDefault()}),$(document).on("click",".video-link",function(e){$el=$(this),$.magnificPopup.open({image:{titleSrc:$el.data("username"),verticalFit:!0},items:{src:$el.attr("href")},type:"iframe",iframe:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" frameborder="0" allowfullscreen></iframe></div>',patterns:{youtube:{index:"youtu",id:function(e){return youtube_parser(e)},src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"},facebook:{index:"facebook.com",id:function(e){return facebook_parser(e)},src:"//www.facebook.com/video/embed?video_id=%id%"}},srcAction:"iframe_src"}},0),e.preventDefault()})});